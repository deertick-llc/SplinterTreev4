Enhance image processing in API class

- Improved async image URL to base64 conversion
- Added robust MIME type detection
- Resolved coroutine serialization issues
- Enhanced error handling for image processing

Improves reliability of vision model image handling
