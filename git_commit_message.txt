feat: Update router system prompt and DM handling

- Replaced router system prompt with more sophisticated routing logic
- Enhanced pattern recognition for model selection
- Maintained DM support from previous commit
- Improved logging and error handling in model selection process
