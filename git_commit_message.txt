Enhance image processing for vision models

- Implemented robust image URL to base64 conversion
- Added MIME type detection for image attachments
- Improved error handling for image processing
- Ensures compatibility with OpenRouter vision models

Resolves MIME type issues in vision model image handling
